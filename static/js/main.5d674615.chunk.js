(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,c){},21:function(e,t,c){},27:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(14),r=c.n(s),i=(c(19),c(7)),o=c.n(i),l=c(12),d=c(5),u=(c(21),c(4)),j=c(3),h=(c(27),c(0));var m=function(e){return console.log("prop",e.type),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"error-holder",children:[Object(h.jsx)("span",{className:"error-icon",children:Object(h.jsx)(u.a,{icon:e.type?j.e:j.f})}),Object(h.jsx)("span",{children:e.type?"Sorry, the specified city was not found...":"Please enter a city name.."})]})})};c(29);var b=function(e){var t=e.data;console.log("props",t);var c=t.city,a=t.country,n=t.date,s=t.description,r=t.main,i=t.temp,o=t.sunset,l=t.sunrise,d=t.humidity,m=t.wind,b=t.highestTemp,O=t.lowestTemp,x=null;return x="Thunderstorm"===r?Object(h.jsx)(u.a,{icon:j.a}):"Drizzle"===r?Object(h.jsx)(u.a,{icon:j.c}):"Rain"===r?Object(h.jsx)(u.a,{icon:j.d}):"Snow"===r?Object(h.jsx)(u.a,{icon:j.h}):"Clear"===r?Object(h.jsx)(u.a,{icon:j.i}):"Clouds"===r?Object(h.jsx)(u.a,{icon:j.b}):Object(h.jsx)(u.a,{icon:j.g}),Object(h.jsxs)("div",{className:"result",children:[Object(h.jsxs)("div",{className:"location",children:[Object(h.jsxs)("h2",{className:"big",children:[c,", ",a]}),Object(h.jsx)("h4",{className:"small",children:n})]}),Object(h.jsxs)("div",{className:"current",children:[Object(h.jsx)("div",{className:"weather-icon",children:x}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{className:"temp",children:[Math.floor(i),"\xb0"]}),Object(h.jsx)("h4",{className:"small",children:s})]})]}),Object(h.jsxs)("div",{className:"weather-detail",children:[Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsxs)("h4",{className:"small-center",children:[Math.floor(b),"\xb0"]}),Object(h.jsx)("span",{className:"text",children:"High"})]}),Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsxs)("h4",{className:"small-center",children:[m,"mph"]}),Object(h.jsx)("span",{className:"text",children:"Wind"})]}),Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsx)("h4",{className:"small-center",children:l}),Object(h.jsx)("span",{className:"text",children:"Sunrise"})]}),Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsxs)("h4",{className:"small-center",children:[Math.floor(O),"\xb0"]}),Object(h.jsx)("span",{className:"text",children:"Low"})]}),Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsxs)("h4",{className:"small-center",children:[d,"%"]}),Object(h.jsx)("span",{className:"text",children:"Rain"})]}),Object(h.jsxs)("div",{className:"weather",children:[Object(h.jsx)("h4",{className:"small-center",children:o}),Object(h.jsx)("span",{className:"text",children:"Sunset"})]})]})]})},O=c(13);c(30);var x=function(e){var t=e.data;console.log("test",t);var c=function(e){return e?new Date(e).getHours():(new Date).getHours()},a=function(e){return e?new Date(e).getDate():(new Date).getDate()},n=function(e,t){return Object(h.jsxs)("div",{className:"hourly-info",children:[Object(h.jsx)("div",{className:"hour-temperature",children:"".concat(Math.round(e.main.temp),"\xb0C")}),Object(h.jsx)("div",{className:"hour-of-the-day",children:"".concat(c(1e3*e.dt),":00")})]},t)};return Object(h.jsx)("div",{className:"hourly",children:t.map((function(e,t){return c(1e3*e.dt)>c()&&a(1e3*e.dt)===a()||c(1e3*e.dt)>=5&&c(1e3*e.dt)<=23?n(e,t):null}))})};var f=function(e){var t=e.data,c=t.city,n=t.list;console.log("forecast",c,n);var s=Object.values(function(e){return e.reduce((function(e,t){var c=t.dt_txt.substr(0,10);return e[c]=e[c]||[],e[c].push(t),e}),{})}(n)),r=s.length>5?s.slice(0,5):s;console.log("test tiles",r);var i=Object(a.useRef)(r.map((function(e,t){return Object(a.createRef)("div-".concat(t))}))),o=function(e){var t=new Date,c=new Date(1e3*e[0].dt).toLocaleString("en-us",{weekday:"long"});return console.log("Weekday",c),console.log("date test",t,t.getDay(),["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][t.getDay()]),c},l=function(e){return"https://openweathermap.org/img/w/".concat(e[0].weather[0].icon,".png")},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];e.map((function(e){c.push(e.main.temp_max),t.push(e.main.temp_min),a.push(e.main.humidity)}));var n={min:Math.round(Math.min.apply(Math,Object(O.a)(t))),max:Math.round(Math.max.apply(Math,Object(O.a)(c)))},s=Math.round(a.reduce((function(e,t){return e+t}))/a.length);return Object(h.jsxs)("div",{className:"weather-info",children:[Object(h.jsxs)("div",{className:"min-max",children:[Object(h.jsx)("strong",{children:"".concat(n.max,"\xb0C")})," / ","".concat(n.min,"\xb0C")]}),Object(h.jsx)("div",{className:"more-info",children:"Avg. Humidity: ".concat(s,"%")})]})};return Object(h.jsxs)("div",{className:"forecast",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h3",{className:"medium",children:"Forecast"})}),Object(h.jsx)("div",{className:"forecast-tiles",children:r.map((function(e,t){return Object(h.jsxs)("div",{className:"forecast-tile tile-".concat(t),ref:i.current[t],onClick:function(){!function(e){var t=i.current[e],c=document.querySelector(".expanded");t.current.classList.add("expanded"),null!==c&&c.classList.remove("expanded")}(t)},children:[Object(h.jsxs)("div",{className:"primary-info",children:[Object(h.jsxs)("div",{className:"icon",children:[Object(h.jsx)("img",{alt:"icon"+t,src:l(e)}),o(e)]}),d(e)]}),Object(h.jsx)("div",{className:"detailed-info",children:Object(h.jsx)(x,{data:e})},t)]},t)}))})]})};c(31);var p=function(){return Object(h.jsx)("div",{class:"container",children:Object(h.jsxs)("div",{class:"loader",children:[Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--dot"}),Object(h.jsx)("div",{class:"loader--text"})]})})};var v=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(null),r=Object(d.a)(s,2),i=r[0],u=r[1],j=Object(a.useState)(""),O=Object(d.a)(j,2),x=O[0],v=O[1],g=Object(a.useState)(!1),y=Object(d.a)(g,2),N=y[0],w=y[1],S=Object(a.useState)(!0),D=Object(d.a)(S,2),P=D[0],M=D[1],C=Object(a.useState)([]),T=Object(d.a)(C,2),F=T[0],k=T[1],A=Object(a.useState)([]),I=Object(d.a)(A,2),E=I[0],L=I[1],R=Object(a.useRef)(null),_=Object(a.useState)(!0),H=Object(d.a)(_,2),J=H[0],W=H[1],q=Object(a.useState)(!1),z=Object(d.a)(q,2),B=z[0],G=z[1],K=function(e){var t=new Date,c="".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]," ").concat(t.getDate()," ").concat(["January","February","March","April","May","June","July","August","September","October","Nocvember","December"][t.getMonth()]),a=new Date(1e3*e.sys.sunset).toLocaleTimeString().slice(0,12),n=new Date(1e3*e.sys.sunrise).toLocaleTimeString().slice(0,10);return{city:e.name,country:e.sys.country,date:c,description:e.weather[0].description,main:e.weather[0].main,temp:e.main.temp,highestTemp:e.main.temp_max,lowestTemp:e.main.temp_min,sunrise:n,sunset:a,clouds:e.clouds.all,humidity:e.main.humidity,wind:e.wind.speed}};return Object(a.useEffect)((function(){new Promise((function(e,t){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e(t.coords)}),(function(e){console.log("error",e),e.code===e.PERMISSION_DENIED&&(M(!1),console.error("Error detecting location."),W(!1))}))})).then((function(e){n(e.latitude),u(e.longitude),null!==c&&null!==i&&function(e,t){return Promise.all([fetch("".concat("https://api.openweathermap.org/data/2.5","/weather/?lat=").concat(e,"&lon=").concat(t,"&units=metric&APPID=").concat("e2fc0353a3ca91f78a2cfba7f1d4b2a9")),fetch("".concat("https://api.openweathermap.org/data/2.5","/forecast/?lat=").concat(e,"&lon=").concat(t,"&units=metric&APPID=").concat("e2fc0353a3ca91f78a2cfba7f1d4b2a9"))])}(c,i).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var c,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].json();case 2:return c=e.sent,e.next=5,t[1].json();case 5:a=e.sent,n=K(c),k(n),L(a),v(c.name),W(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error",e),W(!1)}))})).catch((function(e){throw console.log("error in coordinates",e),W(!1),e}))}),[c,i]),Object(h.jsx)(h.Fragment,{children:J?Object(h.jsx)(p,{}):Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{className:"item-center",children:"WEATHER APP"}),Object(h.jsx)("input",{type:"search",placeholder:"Search a city",name:"search",id:"search",ref:R,value:x,onChange:function(e){v(e.target.value),console.log("test",e.target.value)}}),Object(h.jsx)("div",{className:"search-div",children:Object(h.jsx)("button",{className:"search",type:"submit",onClick:function(e){var t;console.log("test",R.current.value),""!==R.current.value?(t=R.current.value,Promise.all([fetch("".concat("https://api.openweathermap.org/data/2.5","/weather/?q=").concat(t,"&units=metric&APPID=").concat("e2fc0353a3ca91f78a2cfba7f1d4b2a9")),fetch("".concat("https://api.openweathermap.org/data/2.5","/forecast/?q=").concat(t,"&units=metric&APPID=").concat("e2fc0353a3ca91f78a2cfba7f1d4b2a9"))])).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var c,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].json();case 2:return c=e.sent,e.next=5,t[1].json();case 5:if(a=e.sent,console.log(t[0].status,t[1].status),200!==t[0].status){e.next=15;break}return N&&w(!1),n=K(c),e.next=12,k(n);case 12:v(c.name),e.next=19;break;case 15:return G(!0),e.next=18,w(!0);case 18:console.log("error",N);case 19:200===t[1].status?(L(a),P||M(!0)):(console.log("error1",N),w(!0)),console.log("city test",x,F);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw console.log("error search",e),e})):(G(!1),w(!0))},children:"Search"})})]}),N?Object(h.jsx)(m,{type:B}):P?Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(b,{data:F}),Object(h.jsx)(f,{data:E})]}):""]})})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,33)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),g()}},[[32,1,2]]]);
//# sourceMappingURL=main.5d674615.chunk.js.map